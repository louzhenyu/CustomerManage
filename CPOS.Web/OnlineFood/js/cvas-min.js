function supportsCanvas(){return!!document.createElement("canvas").getContext}function getEventCoords(e){var t,n={};return e.targetTouches.length==1?(t=event.targetTouches[0],n.pageX=t.pageX,n.pageY=t.pageY):(n.pageX=e.pageX,n.pageY=e.pageY),isWinner==0&&x>40&&x<90&&(isWinner=!0,ggj.Winner()),n}function getLocalCoords(e,t){var n=0,r=0;while(e!=null)n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{x:t.pageX-n,y:t.pageY-r}}function recompositeCanvases(){var e=$("#maincanvas").get(0),t=canvas.temp.getContext("2d"),n=e.getContext("2d");canvas.temp.width=canvas.temp.width,t.drawImage(canvas.draw,0,0),t.globalCompositeOperation="source-atop",t.drawImage(image.back.img,0,0),n.drawImage(image.front.img,0,0),t.font="22px '微软雅黑'",t.fillText(prize,40,65),n.drawImage(canvas.temp,0,0)}function scratchLine(e,t,n,r){var i=e.getContext("2d");i.lineWidth=10,i.lineCap=i.lineJoin="round",i.strokeStyle="#ddd",i.globalAlpha=1,r&&(i.beginPath(),i.moveTo(t+.01,n)),i.lineTo(t,n),i.stroke()}function setupCanvases(){function t(t){$("#PcBox").css({height:$(window).height(),overflow:"hidden"});var n=getLocalCoords(e,getEventCoords(t));return mouseDown=!0,scratchLine(canvas.draw,n.x,n.y,!0),recompositeCanvases(),!1}function n(t){$("#PcBox").css({height:$(window).height(),overflow:"hidden"});if(!mouseDown)return!0;var n=getLocalCoords(e,getEventCoords(t));return scratchLine(canvas.draw,n.x,n.y,!1),recompositeCanvases(),!1}function r(e){return $("#PcBox").css({height:"auto",overflow:"auto"}),mouseDown?(mouseDown=!1,!1):!0}var e=$("#maincanvas").get(0);e.width=140,e.height=80,canvas.temp=document.createElement("canvas"),canvas.draw=document.createElement("canvas"),canvas.temp.width=canvas.draw.width=e.width,canvas.temp.height=canvas.draw.height=e.height,recompositeCanvases(),document.getElementById("maincanvas").ontouchstart=function(e){e&&e.preventDefault&&e.preventDefault(),t(e)},document.getElementById("maincanvas").ontouchmove=function(e){e&&e.preventDefault&&e.preventDefault(),n(e)},document.getElementById("maincanvas").ontouchend=function(){event&&event.preventDefault&&event.preventDefault(),r()}}function loadImages(){function r(n){e++,e>=t&&setupCanvases()}var e=0,t=0,n;for(k in image)image.hasOwnProperty(k)&&t++;for(k in image)image.hasOwnProperty(k)&&(image[k].img=document.createElement("img"),$(image[k].img).load(r),image[k].img.src=image[k].url)}function loadcanvas(){supportsCanvas()&&loadImages()}var canvas={temp:null,draw:null},mouseDown=!1